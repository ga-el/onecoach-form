---
// Import MultipleEmpresarial component
import MultipleEmpresarial from '../components/forms/MultipleEmpresarial.astro';

// Page configuration
const pageTitle = 'MULTIPLE EMPRESARIAL';
const pageDescription = 'Formulario inteligente de solicitud';

// Get current year for footer
const currentYear = new Date().getFullYear();
---

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form coach</title>
    <meta name="description" content={pageDescription}>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://onecoachdanos.com/wp-content/uploads/2025/08/cropped-LOGOS-180x180.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    
    <style>
        :root {
            --primary: linear-gradient(135deg, #002366 0%, #003d82 100%);
            --primary-solid: #002366;
            --primary-light: #f0f4ff;
            --primary-accent: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            --background-card: rgba(255, 255, 255, 0.9);
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
            --border-focus: #3b82f6;
            --shadow: 0 4px 20px rgba(0, 35, 102, 0.1);
            --shadow-hover: 0 8px 35px rgba(0, 35, 102, 0.15);
            --radius: 12px;
            --radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        /* Dark Theme Variables */
        body.dark-theme {
            --primary: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --primary-solid: #1e40af;
            --primary-light: rgba(59, 130, 246, 0.1);
            --primary-accent: #60a5fa;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --background-card: rgba(30, 41, 59, 0.9);
            --text: #f1f5f9;
            --text-light: #94a3b8;
            --border: #374151;
            --border-focus: #60a5fa;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 8px 35px rgba(0, 0, 0, 0.4);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--background);
            min-height: 100vh;
            position: relative;
        }
        
        /* Hero Header */
        .hero-header {
            background: var(--primary);
            color: white;
            padding: 3rem 2rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 200" fill="rgba(255,255,255,0.1)"><path d="M0,50 Q250,0 500,50 T1000,50 L1000,200 L0,200 Z"/></svg>');
            background-size: cover;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero-logo {
            width: 120px;
            height: auto;
            margin: 0 auto 1rem;
            display: block;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.2));
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: -0.025em;
            animation: slideInUp 0.8s ease-out;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 300;
            margin-bottom: 2rem;
            animation: slideInUp 0.8s ease-out 0.2s both;
        }
        
        .progress-container {
            max-width: 600px;
            margin: 0 auto;
            animation: slideInUp 0.8s ease-out 0.4s both;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            width: 5%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        /* Main Container */
        .main-container {
            max-width: 1000px;
            margin: -1rem auto 0;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }
        
        /* Form Wizard */
        .form-wizard {
            background: var(--background-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            backdrop-filter: blur(10px);
            animation: slideInUp 0.8s ease-out 0.6s both;
        }
        
        .wizard-nav {
            display: flex;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .wizard-nav::-webkit-scrollbar {
            display: none;
        }
        
        .nav-step {
            flex: 1;
            min-width: 120px;
            padding: 1.5rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border-right: 1px solid var(--border);
            position: relative;
        }
        
        .nav-step:last-child {
            border-right: none;
        }
        
        .nav-step.active {
            background: var(--primary-light);
            color: var(--primary-solid);
        }
        
        .nav-step.completed {
            background: #dcfce7;
            color: var(--success);
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-light);
            font-weight: 600;
            margin-bottom: 0.5rem;
            transition: var(--transition);
        }
        
        .nav-step.active .step-number {
            background: var(--primary-solid);
            color: white;
        }
        
        .nav-step.completed .step-number {
            background: var(--success);
            color: white;
        }
        
        .step-title {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        /* Form Step */
        .form-step {
            padding: 3rem;
            display: none;
            animation: fadeInRight 0.5s ease-out;
        }
        
        .form-step.active {
            display: block;
        }
        
        .step-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .step-title-main {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.5rem;
        }
        
        .step-description {
            color: var(--text-light);
            font-size: 1.125rem;
        }
        
        /* Smart Form Groups */
        .smart-grid {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .grid-1 { grid-template-columns: 1fr; }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
        
        .field-group {
            position: relative;
        }
        
        .field-label {
            display: block;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .required {
            color: var(--error);
        }
        
        /* Enhanced Inputs */
        .smart-input {
            width: 100%;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }
        
        .smart-input:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }
        
        .smart-input:valid {
            border-color: var(--success);
        }
        
        /* Smart Select */
        .smart-select {
            position: relative;
        }
        
        .smart-select select {
            appearance: none;
            background: white url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23002366"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat right 1rem center;
            background-size: 20px;
            cursor: pointer;
        }
        
        /* Checkbox and Radio Groups */
        .option-group {
            display: grid;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }
        
        .option-item {
            display: flex;
            align-items: center;
            padding: 1.25rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .option-item:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: var(--primary-light);
            transition: width 0.3s ease;
            z-index: 0;
        }
        
        .option-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 35, 102, 0.1);
        }
        
        .option-item input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .option-item label {
            display: flex;
            align-items: center;
            position: relative;
            z-index: 1;
            width: 100%;
            cursor: pointer;
            font-weight: 500;
            color: var(--text);
        }
        
        .option-item label:before {
            content: '';
            display: inline-block;
            width: 22px;
            height: 22px;
            margin-right: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .option-item input[type="checkbox"]:checked + label:before {
            background-color: var(--primary);
            border-color: var(--primary);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 14px;
        }
        
        .option-item input[type="checkbox"],
        .option-item input[type="radio"] {
            width: 18px;
            height: 18px;
            margin-right: 0.75rem;
            accent-color: var(--primary-solid);
        }
        
        .option-item.checked {
            border-color: var(--primary-solid);
            background: var(--primary-light);
        }
        
        /* File Upload */
        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            background: #fafafa;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .file-upload:hover {
            border-color: var(--border-focus);
            background: var(--primary-light);
        }
        
        .file-upload.dragover {
            border-color: var(--primary-solid);
            background: var(--primary-light);
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 3rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        
        .upload-text {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .upload-hint {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        /* Navigation Buttons */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .btn-secondary {
            background: white;
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: #f8fafc;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Auto-complete and suggestions */
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 var(--radius) var(--radius);
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }
        
        .suggestion-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .suggestion-item:hover {
            background: var(--primary-light);
        }
        
        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0, -8px, 0);
            }
            70% {
                transform: translate3d(0, -4px, 0);
            }
            90% {
                transform: translate3d(0, -2px, 0);
            }
        }
        
        /* Smart tips */
        .smart-tip {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 1px solid #93c5fd;
            border-radius: var(--radius);
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .tip-icon {
            color: var(--primary-solid);
        }
        
        /* Final Submit Section */
        .submit-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #86efac;
            border-radius: var(--radius-lg);
            padding: 3rem;
            text-align: center;
            margin-top: 2rem;
        }
        
        .submit-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 1rem;
        }
        
        .submit-description {
            color: var(--text-light);
            margin-bottom: 2rem;
        }
        
        .btn-submit {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            padding: 1.25rem 3rem;
            font-size: 1.125rem;
            font-weight: 600;
        }
        
        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .main-container {
                padding: 1rem;
            }
            
            .form-step {
                padding: 2rem 1.5rem;
            }
            
            .step-title-main {
                font-size: 1.5rem;
            }
            
            .wizard-nav {
                flex-wrap: wrap;
            }
            
            .nav-step {
                min-width: 100px;
                padding: 1rem 0.5rem;
            }
        }
        
        /* Hide original form initially */
        .original-form {
            display: none;
        }
        
        /* Mejoras visuales adicionales */
        .nav-step.accessible {
            cursor: pointer;
        }
        
        .nav-step:not(.accessible) {
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .smart-input.loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Efectos de hover mejorados */
        .option-item:hover {
            border-color: var(--border-focus);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .option-item.checked {
            border-color: var(--primary-solid);
            background: var(--primary-light);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

		/* --- Añade esto dentro de tu etiqueta <style> --- */

/* Estilo para el contenedor del campo con error */
.field-group.has-error .smart-input {
    border-color: var(--error);
    background-color: #fff5f5; /* Un fondo rosado muy claro */
    animation: shake 0.5s;
}

/* También cambia el color de la etiqueta para que coincida */
.field-group.has-error .field-label {
    color: var(--error);
    font-weight: 600;
}
F
body.dark-theme .field-group.has-error .smart-input {
    background-color: rgba(239, 68, 68, 0.1); /* Fondo rojo oscuro transparente */
}

/* Animación de "temblor" para llamar la atención */
@keyframes shake {
    10%, 90% { transform: translateX(-1px); }
    20%, 80% { transform: translateX(2px); }
    30%, 50%, 70% { transform: translateX(-4px); }
    40%, 60% { transform: translateX(4px); }
}
        
        /* Indicadores visuales mejorados */
        .field-group.completed::after {
            content: '✓';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* Animaciones de transición */
        .form-step {
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        /* Mejoras para campos requeridos */
        .smart-input[required]:focus {
            border-left: 4px solid var(--primary-accent);
        }
        
        .smart-input[required]:valid {
            border-left: 4px solid var(--success);
        }
        
        .smart-input[required]:invalid {
            border-left: 4px solid var(--error);
        }
        
        /* Dark mode toggle - MEJORADO */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--background-card);
            border: 2px solid var(--border);
            border-radius: 50px;
            padding: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            font-size: 1.2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-accent);
        }
        
        /* Dark theme styles - COMPLETO */
        body.dark-theme {
            color: var(--text);
            transition: var(--transition);
        }
        
        body.dark-theme .smart-input {
            background: rgba(30, 41, 59, 0.8);
            color: var(--text);
            border-color: var(--border);
        }
        
        body.dark-theme .smart-input:focus {
            background: rgba(30, 41, 59, 1);
            border-color: var(--border-focus);
        }
        
        body.dark-theme .option-item {
            background: rgba(30, 41, 59, 0.8);
            border-color: var(--border);
            color: var(--text);
        }
        
        body.dark-theme .option-item:hover {
            background: rgba(59, 130, 246, 0.1);
        }
        
        body.dark-theme .file-upload {
            background: rgba(30, 41, 59, 0.5);
            border-color: var(--border);
            color: var(--text);
        }
        
        body.dark-theme .file-upload:hover {
            background: var(--primary-light);
            border-color: var(--border-focus);
        }
        
        body.dark-theme .wizard-nav {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.9) 100%);
        }
        
        body.dark-theme .nav-step {
            color: var(--text);
        }
        
        body.dark-theme .nav-step:hover:not(.active) {
            background: rgba(59, 130, 246, 0.1);
        }
        
        body.dark-theme .hero-header {
            background: var(--primary);
        }
        
        body.dark-theme .submit-section {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        body.dark-theme .smart-tip {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(30, 64, 175, 0.1) 100%);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        body.dark-theme .btn-secondary {
            background: rgba(30, 41, 59, 0.9);
            color: var(--text);
            border-color: var(--border);
        }
        
        body.dark-theme .btn-secondary:hover {
            background: rgba(59, 130, 246, 0.1);
        }
        
        body.dark-theme .field-label {
            color: var(--text);
        }
        
        body.dark-theme .step-description {
            color: var(--text-light);
        }
        
        /* Indicador de tiempo estimado */
        .time-estimate {
            position: absolute;
            top: -30px;
            right: 0;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-solid);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .step-header {
            position: relative;
        }
    </style>
</head>
<body>
    <!-- Header con estilo Hero moderno -->
    <!-- Tema toggle button -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Alternar tema">
        <span id="theme-icon">🌙</span>
    </button>
    
    <header class="hero-header">
        <div class="hero-content">
            <h1 class="hero-title">{pageTitle}</h1>
            <p class="hero-subtitle">{pageDescription}</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="progress-text"><span id="progress-percent">17</span>% completado - <span id="current-section-name">Información Básica</span></p>
            </div>
        </div>
    </header>
    
    <main class="main-container">
        <!-- Nueva interfaz con formato wizard -->
        <div class="form-wizard">
            <!-- Navegación superior del wizard -->
            <nav class="wizard-nav">
                <div class="nav-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-title">Información Básica</div>
                </div>
                <div class="nav-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-title">Ubicación de Riesgo</div>
                </div>
                <div class="nav-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-title">Características</div>
                </div>
                <div class="nav-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-title">Seguridad</div>
                </div>
                <div class="nav-step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-title">Coberturas</div>
                </div>
                <div class="nav-step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-title">Finalizar</div>
                </div>
            </nav>
            
            <!-- PASO 1: Información Básica -->
            <form id="wizard-form">
                <div class="form-step active" id="step-1">
                    <div class="step-header">
                        <div class="time-estimate">⏱️ 3-4 min</div>
                        <h2 class="step-title-main">Datos Generales del Solicitante</h2>
                        <p class="step-description">Información básica del solicitante y la empresa</p>
                    </div>
                    
                    <div class="smart-grid grid-2">
                        <div class="field-group">
                            <label class="field-label" for="nombre-completo">Nombre completo <span class="required">*</span></label>
                            <input type="text" id="nombre-completo" name="nombre_completo" class="smart-input" placeholder="Nombre completo del solicitante" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="rfc">RFC <span class="required">*</span></label>
                            <input type="text" id="rfc" name="rfc" class="smart-input" placeholder="Ingrese el RFC" required>
                        </div>
                    </div>

                    <div class="smart-grid grid-3">
                        <div class="field-group">
                            <label class="field-label" for="cp">C.P. <span class="required">*</span></label>
                            <input type="text" id="cp" name="cp" class="smart-input" placeholder="00000" pattern="[0-9]{5}" maxlength="5" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="colonia">Colonia <span class="required">*</span></label>
                            <input type="text" id="colonia" name="colonia" class="smart-input" placeholder="Colonia" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="municipio">Municipio <span class="required">*</span></label>
                            <input type="text" id="municipio" name="municipio" class="smart-input" placeholder="Municipio" required>
                        </div>
                    </div>

                    <div class="smart-grid grid-3">
                        <div class="field-group">
                            <label class="field-label" for="estado">Estado <span class="required">*</span></label>
                            <div class="smart-select">
                                <select id="estado" name="estado" class="smart-input" required>
                                    <option value="">Seleccione un estado</option>
                                    <option value="Aguascalientes">Aguascalientes</option>
                                    <option value="Baja California">Baja California</option>
                                    <option value="Baja California Sur">Baja California Sur</option>
                                    <option value="Campeche">Campeche</option>
                                    <option value="Chiapas">Chiapas</option>
                                    <option value="Chihuahua">Chihuahua</option>
                                    <option value="Ciudad de México">Ciudad de México</option>
                                    <option value="Coahuila">Coahuila</option>
                                    <option value="Colima">Colima</option>
                                    <option value="Durango">Durango</option>
                                    <option value="Estado de México">Estado de México</option>
                                    <option value="Guanajuato">Guanajuato</option>
                                    <option value="Guerrero">Guerrero</option>
                                    <option value="Hidalgo">Hidalgo</option>
                                    <option value="Jalisco">Jalisco</option>
                                    <option value="Michoacán">Michoacán</option>
                                    <option value="Morelos">Morelos</option>
                                    <option value="Nayarit">Nayarit</option>
                                    <option value="Nuevo León">Nuevo León</option>
                                    <option value="Oaxaca">Oaxaca</option>
                                    <option value="Puebla">Puebla</option>
                                    <option value="Querétaro">Querétaro</option>
                                    <option value="Quintana Roo">Quintana Roo</option>
                                    <option value="San Luis Potosí">San Luis Potosí</option>
                                    <option value="Sinaloa">Sinaloa</option>
                                    <option value="Sonora">Sonora</option>
                                    <option value="Tabasco">Tabasco</option>
                                    <option value="Tamaulipas">Tamaulipas</option>
                                    <option value="Tlaxcala">Tlaxcala</option>
                                    <option value="Veracruz">Veracruz</option>
                                    <option value="Yucatán">Yucatán</option>
                                    <option value="Zacatecas">Zacatecas</option>
                                </select>
                            </div>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="telefono">Teléfono <span class="required">*</span></label>
                            <input type="tel" id="telefono" name="telefono" class="smart-input" placeholder="(55) 1234-5678" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="correo">e-MAIL <span class="required">*</span></label>
                            <input type="email" id="correo" name="correo" class="smart-input" placeholder="ejemplo@empresa.com" required>
                        </div>
                    </div>

                    <div class="smart-grid grid-2">
                        <div class="field-group">
                            <label class="field-label" for="sitio-web">Sitio web</label>
                            <input type="url" id="sitio-web" name="sitio_web" class="smart-input" placeholder="https://www.ejemplo.com">
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="actividad-principal">Actividad principal de la empresa <span class="required">*</span></label>
                            <input type="text" id="actividad-principal" name="actividad_principal" class="smart-input" placeholder="Ej: Comercio al por menor" required>
                        </div>
                    </div>

                    <div class="smart-grid grid-2">
                        <div class="field-group">
                            <label class="field-label" for="giro-negocio">GIRO del negocio <span class="required">*</span></label>
                            <input type="text" id="giro-negocio" name="giro_negocio" class="smart-input" placeholder="Ej: Comercio, Servicios, Industrial" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="fecha-solicitud">Fecha de solicitud <span class="required">*</span></label>
                            <input type="date" id="fecha-solicitud" name="fecha_solicitud" class="smart-input" required>
                        </div>
                    </div>
                    
                    <div class="smart-tip">
                        <span class="tip-icon">💡</span>
                        <span>Al ingresar el código postal, se autocompletarán la colonia, municipio y estado.</span>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()" style="visibility: hidden;"><span>←</span> Anterior</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Siguiente <span>→</span></button>
                    </div>
                </div>
                
                <!-- PASO 2: Ubicación del Domicilio de Riesgo -->
                <div class="form-step" id="step-2">
                    <div class="step-header">
                        <div class="time-estimate">⏱️ 2-3 min</div>
                        <h2 class="step-title-main">Ubicación del Domicilio de Riesgo</h2>
                        <p class="step-description">Información detallada de la ubicación del riesgo</p>
                    </div>
                    
                    <div class="option-group">
                        <div class="option-item" onclick="toggleOption(this, 'same-address')">
                            <input type="checkbox" id="same-address" name="same_address">
                            <label for="same-address">Misma dirección que los datos generales</label>
                        </div>
                    </div>
                    
                    <div id="risk-address-fields" class="smart-grid grid-3">
                        <div class="field-group">
                            <label class="field-label" for="cp-riesgo">C.P. <span class="required">*</span></label>
                            <input type="text" id="cp-riesgo" name="cp_riesgo" class="smart-input" placeholder="00000" pattern="[0-9]{5}" maxlength="5" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="colonia-riesgo">Colonia <span class="required">*</span></label>
                            <input type="text" id="colonia-riesgo" name="colonia_riesgo" class="smart-input" placeholder="Colonia" required>
                        </div>
                        <div class="field-group">
                            <label class="field-label" for="municipio-riesgo">Municipio <span class="required">*</span></label>
                            <input type="text" id="municipio-riesgo" name="municipio_riesgo" class="smart-input" placeholder="Municipio" required>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="estado-riesgo">Estado <span class="required">*</span></label>
                            <select id="estado-riesgo" name="estado_riesgo" class="smart-input" required>
                                <option value="">Seleccione un estado</option>
                                <option value="Aguascalientes">Aguascalientes</option>
                                <option value="Baja California">Baja California</option>
                                <option value="Baja California Sur">Baja California Sur</option>
                                <option value="Campeche">Campeche</option>
                                <option value="Chiapas">Chiapas</option>
                                <option value="Chihuahua">Chihuahua</option>
                                <option value="Ciudad de México">Ciudad de México</option>
                                <option value="Coahuila">Coahuila</option>
                                <option value="Colima">Colima</option>
                                <option value="Durango">Durango</option>
                                <option value="Estado de México">Estado de México</option>
                                <option value="Guanajuato">Guanajuato</option>
                                <option value="Guerrero">Guerrero</option>
                                <option value="Hidalgo">Hidalgo</option>
                                <option value="Jalisco">Jalisco</option>
                                <option value="Michoacán">Michoacán</option>
                                <option value="Morelos">Morelos</option>
                                <option value="Nayarit">Nayarit</option>
                                <option value="Nuevo León">Nuevo León</option>
                                <option value="Oaxaca">Oaxaca</option>
                                <option value="Puebla">Puebla</option>
                                <option value="Querétaro">Querétaro</option>
                                <option value="Quintana Roo">Quintana Roo</option>
                                <option value="San Luis Potosí">San Luis Potosí</option>
                                <option value="Sinaloa">Sinaloa</option>
                                <option value="Sonora">Sonora</option>
                                <option value="Tabasco">Tabasco</option>
                                <option value="Tamaulipas">Tamaulipas</option>
                                <option value="Tlaxcala">Tlaxcala</option>
                                <option value="Veracruz">Veracruz</option>
                                <option value="Yucatán">Yucatán</option>
                                <option value="Zacatecas">Zacatecas</option>
                            </select>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="calle-riesgo">Calle <span class="required">*</span></label>
                            <input type="text" id="calle-riesgo" name="calle_riesgo" class="smart-input" placeholder="Nombre de la calle" required>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="numero-riesgo">Número <span class="required">*</span></label>
                            <input type="text" id="numero-riesgo" name="numero_riesgo" class="smart-input" placeholder="Número exterior" required>
                        </div>
                    </div>
                    
                    <div class="smart-tip">
                        <span class="tip-icon">📌</span>
                        <span>En caso de varias ubicaciones, anexar relación por separado.</span>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()"><span>←</span> Anterior</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Siguiente <span>→</span></button>
                    </div>
                </div>
                
                <!-- PASO 3: Características del Edificio -->
                <div class="form-step" id="step-3">
                    <div class="step-header">
                        <div class="time-estimate">⏱️ 3-4 min</div>
                        <h2 class="step-title-main">Características del Edificio</h2>
                        <p class="step-description">Detalles de construcción y características del inmueble</p>
                    </div>
                    
                    <div class="smart-grid grid-3">
                        <div class="field-group">
                            <label class="field-label" for="antiguedad">Antigüedad del edificio <span class="required">*</span></label>
                            <input type="text" id="antiguedad" name="antiguedad" class="smart-input" placeholder="Años de antigüedad" required>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="superficie">Superficie construida (m²) <span class="required">*</span></label>
                            <input type="number" id="superficie" name="superficie" class="smart-input" placeholder="m²" min="1" required>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="pisos">Número de pisos <span class="required">*</span></label>
                            <input type="number" id="pisos" name="pisos" class="smart-input" placeholder="Incluyendo planta baja" min="1" required>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="sotanos">Número de sótanos</label>
                            <input type="number" id="sotanos" name="sotanos" class="smart-input" placeholder="Número de niveles" min="0" value="0">
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label" for="tipo-techo">Tipo de techos <span class="required">*</span></label>
                            <select id="tipo-techo" name="tipo_techo" class="smart-input" required>
                                <option value="">Seleccione una opción</option>
                                <option value="Losa de concreto">Losa de concreto</option>
                                <option value="Lámina">Lámina</option>
                                <option value="Teja">Teja</option>
                                <option value="Madera">Madera</option>
                                <option value="Otro">Otro (especificar)</option>
                            </select>
                        </div>
                        
                        <div class="field-group" id="otro-techo-group" style="display: none;">
                            <label class="field-label" for="otro-techo">Especifique tipo de techo</label>
                            <input type="text" id="otro-techo" name="otro_techo" class="smart-input" placeholder="Especifique el tipo de techo">
                        </div>
                    </div>
                    
                    <div class="section-divider">
                        <span>Medidas de seguridad</span>
                    </div>
                    
                    <div class="smart-grid grid-2">
                        <div class="option-group">
                            <div class="option-item">
                                <input type="checkbox" id="caja-fuerte" name="caja_fuerte">
                                <label for="caja-fuerte">Caja fuerte</label>
                            </div>
                            
                            <div class="option-item">
                                <input type="checkbox" id="circuito-cerrado" name="circuito_cerrado">
                                <label for="circuito-cerrado">Circuito cerrado</label>
                            </div>
                            
                            <div class="option-item">
                                <input type="checkbox" id="exclusas" name="exclusas">
                                <label for="exclusas">Exclusas</label>
                                <div id="tipo-exclusas-group" style="display: none; margin-top: 5px;">
                                    <input type="text" id="tipo-exclusas" name="tipo_exclusas" class="smart-input" placeholder="Tipo de exclusas">
                                </div>
                            </div>
                            
                            <div class="option-item">
                                <input type="checkbox" id="vigilancia" name="vigilancia">
                                <label for="vigilancia">Vigilancia</label>
                                <div id="tipo-vigilancia-group" style="display: none; margin-top: 5px;">
                                    <select id="tipo-vigilancia" name="tipo_vigilancia" class="smart-input">
                                        <option value="">Seleccione tipo</option>
                                        <option value="24/7">24/7</option>
                                        <option value="Nocturna">Nocturna</option>
                                        <option value="Diurna">Diurna</option>
                                        <option value="Ocasional">Ocasional</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()"><span>←</span> Anterior</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Siguiente <span>→</span></button>
                    </div>
                </div>
                   
                    
                   
                
                <!-- PASO 4: Medidas de Seguridad -->
                <div class="form-step" id="step-4">
                    <div class="step-header">
                        <div class="time-estimate">⏱️ 2-3 min</div>
                        <h2 class="step-title-main">Medidas de Seguridad</h2>
                        <p class="step-description">Selecciona las medidas de seguridad con las que cuenta el inmueble</p>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Sistemas de Seguridad contra Incendio</label>
                        <div class="option-group">
                            <div class="option-item" onclick="toggleOption(this, 'sistema_extintores')">
                                <input type="checkbox" id="sistema_extintores" name="sistema_extintores" value="Sí">
                                <div>
                                    <strong>Sistema de Extintores</strong><br>
                                    <small>Equipos portátiles contra incendios</small>
                                </div>
                            </div>
                            <div class="option-item" onclick="toggleOption(this, 'sistema_hidrantes')">
                                <input type="checkbox" id="sistema_hidrantes" name="sistema_hidrantes" value="Sí">
                                <div>
                                    <strong>Sistema de Hidrantes</strong><br>
                                    <small>Red fija de agua contra incendios</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Sistemas de Alarma y Detección</label>
                        <div class="option-group">
                            <div class="option-item" onclick="toggleOption(this, 'alarma_robo')">
                                <input type="checkbox" id="alarma_robo" name="alarma_robo" value="Sí">
                                <div>
                                    <strong>Alarma de Robo</strong><br>
                                    <small>Sistema de detección de intrusos</small>
                                </div>
                            </div>
                            <div class="option-item" onclick="toggleOption(this, 'alarma_incendio')">
                                <input type="checkbox" id="alarma_incendio" name="alarma_incendio" value="Sí">
                                <div>
                                    <strong>Alarma de Incendio</strong><br>
                                    <small>Sistema de detección de humo/fuego</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Medidas de Seguridad Física</label>
                        <div class="option-group">
                            <div class="option-item" onclick="toggleOption(this, 'vigilancia')">
                                <input type="checkbox" id="vigilancia" name="vigilancia" value="Sí">
                                <div>
                                    <strong>Vigilancia</strong><br>
                                    <small>Servicio de seguridad privada</small>
                                </div>
                            </div>
                            <div class="option-item" onclick="toggleOption(this, 'cercado')">
                                <input type="checkbox" id="cercado" name="cercado" value="Sí">
                                <div>
                                    <strong>Cercado Perimetral</strong><br>
                                    <small>Bardas, rejas o muros perimetrales</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()"><span>←</span> Anterior</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Siguiente <span>→</span></button>
                    </div>
                </div>
                
                <!-- PASO 5: Coberturas -->
                <div class="form-step" id="step-5">
                    <div class="step-header">
                        <div class="time-estimate">⏱️ 2-3 min</div>
                        <h2 class="step-title-main">Coberturas de Seguro</h2>
                        <p class="step-description">Configura las coberturas y montos asegurados</p>
                    </div>
                    
                    <div class="smart-grid grid-2">
                        <div class="field-group">
                            <label class="field-label">Suma Asegurada - Edificio</label>
                            <input type="text" id="suma_edificio" name="suma_edificio" class="smart-input" placeholder="$0.00">
                        </div>
                        <div class="field-group">
                            <label class="field-label">Suma Asegurada - Contenidos</label>
                            <input type="text" id="suma_contenidos" name="suma_contenidos" class="smart-input" placeholder="$0.00">
                        </div>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Coberturas Adicionales</label>
                        <div class="option-group">
                            <div class="option-item" onclick="toggleOption(this, 'cobertura_explosion')">
                                <input type="checkbox" id="cobertura_explosion" name="cobertura_explosion" value="Sí">
                                <div><strong>Explosión</strong></div>
                            </div>
                            <div class="option-item" onclick="toggleOption(this, 'cobertura_huelgas')">
                                <input type="checkbox" id="cobertura_huelgas" name="cobertura_huelgas" value="Sí">
                                <div><strong>Huelgas y Vandalismo</strong></div>
                            </div>
                            <div class="option-item" onclick="toggleOption(this, 'cobertura_terremoto')">
                                <input type="checkbox" id="cobertura_terremoto" name="cobertura_terremoto" value="Sí">
                                <div><strong>Terremoto y Erupción Volcánica</strong></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()"><span>←</span> Anterior</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Finalizar <span>→</span></button>
                    </div>
                </div>
                
                <!-- PASO 6: Finalizar -->
                <div class="form-step" id="step-6">
                    <div class="submit-section">
                        <div class="time-estimate">⏱️ 1 min</div>
                        <h2 class="submit-title">¡Formulario Completado! 🎉</h2>
                        <p class="submit-description">Revisa la información y envía tu solicitud de seguro empresarial.</p>
                        
                        <div class="smart-grid grid-2">
                            <div class="field-group">
                                <label class="field-label">Nombre del Asegurado <span class="required">*</span></label>
                                <input type="text" id="nombre_asegurado" name="nombre_asegurado" class="smart-input" placeholder="Nombre completo" required>
                            </div>
                            <div class="field-group">
                                <label class="field-label">Fecha de Solicitud</label>
                                <input type="date" id="fecha_firma" name="fecha_firma" class="smart-input">
                            </div>
                        </div>
                        
                        <div class="file-upload" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)">
                            <div class="upload-icon">📁</div>
                            <div class="upload-text">Subir Documentos Adicionales</div>
                            <div class="upload-hint">Arrastra archivos aquí o haz clic para seleccionar</div>
                            <input type="file" id="documentos" name="documentos" multiple style="display: none;">
                        </div>
                        
                        <button type="submit" class="btn btn-submit">Enviar Solicitud</button>
                    </div>
                    
                    <div class="step-navigation">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()"><span>←</span> Anterior</button>
                        <div></div>
                    </div>
                </div>
            </form>
            
            <!-- Ocultar el componente original para reemplazarlo por el nuevo diseño -->
            <div class="original-form">
                <MultipleEmpresarial />
            
            <!-- Datos Fiscales del Cliente -->
            <div class="form-section">
                <h2 class="section-title">DATOS FISCALES DEL CLIENTE</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="rfc-old">RFC:</label>
                        <input type="text" id="rfc-old" name="rfc" class="form-input" placeholder="Ingrese el RFC">
                    </div>
                    <div class="form-group">
                        <label for="razon-social-old">RAZÓN SOCIAL:</label>
                        <input type="text" id="razon-social-old" name="razon_social" class="form-input" placeholder="Ingrese la razón social">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="cp-old">C.P.:</label>
                        <input type="text" id="cp-old" name="cp" class="form-input" placeholder="Código Postal">
                    </div>
                    <div class="form-group">
                        <label for="estado">ESTADO:</label>
                        <input type="text" id="estado" name="estado" class="form-input" placeholder="Estado">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="municipio">MUNICIPIO O ALCALDÍA:</label>
                        <input type="text" id="municipio" name="municipio" class="form-input" placeholder="Municipio o Alcaldía">
                    </div>
                    <div class="form-group">
                        <label for="colonia">COLONIA:</label>
                        <input type="text" id="colonia" name="colonia" class="form-input" placeholder="Colonia">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="calle">CALLE:</label>
                        <input type="text" id="calle" name="calle" class="form-input" placeholder="Calle">
                    </div>
                    <div class="form-group">
                        <label for="numero">NÚMERO:</label>
                        <input type="text" id="numero" name="numero" class="form-input" placeholder="Número">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="telefono">TELÉFONO:</label>
                        <input type="tel" id="telefono" name="telefono" class="form-input" placeholder="Teléfono">
                    </div>
                    <div class="form-group">
                        <label for="correo">CORREO ELECTRÓNICO:</label>
                        <input type="email" id="correo" name="correo" class="form-input" placeholder="Correo electrónico">
                    </div>
                </div>
            </div>
            <!-- Fin de Datos Fiscales del Cliente -->

            <!-- Ubicación del Domicilio de Riesgo -->
            <div class="form-section">
                <h2 class="section-title">UBICACIÓN DEL DOMICILIO DE RIESGO</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="calle-riesgo">CALLE:</label>
                        <input type="text" id="calle-riesgo" name="calle_riesgo" class="form-input" placeholder="Calle">
                    </div>
                    <div class="form-group">
                        <label for="numero-riesgo">NÚMERO:</label>
                        <input type="text" id="numero-riesgo" name="numero_riesgo" class="form-input" placeholder="Número">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="colonia-riesgo">COLONIA:</label>
                        <input type="text" id="colonia-riesgo" name="colonia_riesgo" class="form-input" placeholder="Colonia">
                    </div>
                    <div class="form-group">
                        <label for="cp-riesgo">C.P.:</label>
                        <input type="text" id="cp-riesgo" name="cp_riesgo" class="form-input" placeholder="Código Postal">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="municipio-riesgo">MUNICIPIO O ALCALDÍA:</label>
                        <input type="text" id="municipio-riesgo" name="municipio_riesgo" class="form-input" placeholder="Municipio o Alcaldía">
                    </div>
                    <div class="form-group">
                        <label for="estado-riesgo">ESTADO:</label>
                        <input type="text" id="estado-riesgo" name="estado_riesgo" class="form-input" placeholder="Estado">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="entre-calles">ENTRE CALLES:</label>
                        <input type="text" id="entre-calles" name="entre_calles" class="form-input" placeholder="Entre calles">
                    </div>
                    <div class="form-group">
                        <label for="referencias">REFERENCIAS:</label>
                        <input type="text" id="referencias" name="referencias" class="form-input" placeholder="Referencias">
                    </div>
                </div>
            </div>
            <!-- Fin de Ubicación del Domicilio de Riesgo -->

            <!-- Características Constructivas del Edificio y Medidas de Seguridad -->
            <div class="form-section">
                <h2 class="section-title">CARACTERISTICAS CONSTRUCTIVAS DEL EDIFICIO Y MEDIDAS DE SEGURIDAD</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>TIPO DE CONSTRUCCIÓN:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="tipo_construccion" value="A"> A
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="tipo_construccion" value="B"> B
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="tipo_construccion" value="C"> C
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="tipo_construccion" value="D"> D
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="anio-construccion">AÑO DE CONSTRUCCIÓN:</label>
                        <input type="number" id="anio-construccion" name="anio_construccion" class="form-input" placeholder="Año de construcción" min="1900" max="2025">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="superficie-terreno">SUPERFICIE DEL TERRENO (m2):</label>
                        <input type="number" id="superficie-terreno" name="superficie_terreno" class="form-input" placeholder="m²" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="superficie-construida">SUPERFICIE CONSTRUIDA (m2):</label>
                        <input type="number" id="superficie-construida" name="superficie_construida" class="form-input" placeholder="m²" step="0.01">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="niveles">NIVELES:</label>
                        <input type="number" id="niveles" name="niveles" class="form-input" placeholder="Número de niveles" min="1">
                    </div>
                    <div class="form-group">
                        <label>USO DEL INMUEBLE:</label>
                        <select id="uso-inmueble" name="uso_inmueble" class="form-input">
                            <option value="">Seleccione una opción</option>
                            <option value="Comercial">Comercial</option>
                            <option value="Industrial">Industrial</option>
                            <option value="Oficinas">Oficinas</option>
                            <option value="Residencial">Residencial</option>
                            <option value="Almacén">Almacén</option>
                            <option value="Mixto">Mixto</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="sistema_extintores" value="Sí">
                            SISTEMA DE EXTINTORES
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="sistema_hidrantes" value="Sí">
                            SISTEMA DE HIDRANTES
                        </label>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="alarma_robo" value="Sí">
                            ALARMA DE ROBO
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="alarma_incendio" value="Sí">
                            ALARMA DE INCENDIO
                        </label>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="vigilancia" value="Sí">
                            VIGILANCIA
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="cercado" value="Sí">
                            CERCADO
                        </label>
                    </div>
                </div>
            </div>
            <!-- Fin de Características Constructivas del Edificio y Medidas de Seguridad -->

            <!-- Medidas de Seguridad Contra Robo -->
            <div class="form-section">
                <h2 class="section-title">MEDIDAS DE SEGURIDAD CONTRA ROBO</h2>
                
                <!-- Medidas de Seguridad Básicas -->
                <div class="form-subsection">
                    <h3 class="subsection-title">1. Medidas de Seguridad Básicas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="alarma_local" value="Sí">
                                ALARMA LOCAL
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="alarma_central" value="Sí">
                                ALARMA CENTRAL
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="domos_patios" value="Sí">
                                DOMOS Y/O PATIOS
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Elementos de Seguridad Física -->
                <div class="form-subsection">
                    <h3 class="subsection-title">2. Elementos de Seguridad Física</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="caja_fuerte" value="Sí">
                                CAJA FUERTE O BOVEDA
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="circuito_tv" value="Sí">
                                CIRCUITO CDO. DE T.V.
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Exclusiones -->
                <div class="form-subsection">
                    <h3 class="subsection-title">3. Exclusiones</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="exclusiones">EXCLUSIONES:</label>
                            <input type="text" id="exclusiones" name="exclusiones" class="form-input" placeholder="Especifique exclusiones">
                        </div>
                    </div>
                </div>

                <!-- Vigilancia -->
                <div class="form-subsection">
                    <h3 class="subsection-title">4. Vigilancia</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="vigilancia_24hrs" value="Sí">
                                24 HRS
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="vigilancia_armada" value="Sí">
                                ARMADA
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rondines" value="Sí">
                                RONDINES
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="tipo_vigilancia">TIPO:</label>
                            <input type="text" id="tipo_vigilancia" name="tipo_vigilancia" class="form-input" placeholder="Especifique tipo">
                        </div>
                    </div>
                </div>

                <!-- Puertas y Ventanas Protegidas -->
                <div class="form-subsection">
                    <h3 class="subsection-title">5. Puertas y Ventanas Protegidas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="puertas_ventanas_protegidas" value="Sí">
                                PUERTAS Y VENTANAS CON PROTECCIÓN
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipo_proteccion">TIPO:</label>
                            <input type="text" id="tipo_proteccion" name="tipo_proteccion" class="form-input" placeholder="Especifique tipo de protección">
                        </div>
                    </div>
                </div>

                <!-- Recolección de Dinero -->
                <div class="form-subsection">
                    <h3 class="subsection-title">6. Recolección de Dinero</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="recoleccion_dinero" value="Sí">
                                RECOLECCIÓN DE DINERO
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="colindantes_sin_fincar" value="Sí">
                                COLINDANTES SIN FINCAR
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipo_recoleccion">TIPO:</label>
                            <input type="text" id="tipo_recoleccion" name="tipo_recoleccion" class="form-input" placeholder="Especifique tipo de recolección">
                        </div>
                    </div>
                </div>

                <!-- Depósitos Bancarios -->
                <div class="form-subsection">
                    <h3 class="subsection-title">7. Depósitos Bancarios</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="depositos_bancarios" value="Sí">
                                DEPÓSITOS BANCARIOS
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="frecuencia_depositos">FRECUENCIA:</label>
                            <select id="frecuencia_depositos" name="frecuencia_depositos" class="form-input">
                                <option value="">Seleccione frecuencia</option>
                                <option value="Diario">Diario</option>
                                <option value="Semanal">Semanal</option>
                                <option value="Quincenal">Quincenal</option>
                                <option value="Mensual">Mensual</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="otra_informacion">OTRA (ESPECIFICAR):</label>
                            <input type="text" id="otra_informacion" name="otra_informacion" class="form-input" placeholder="Especifique">
                        </div>
                    </div>
                </div>

                <!-- Subida de Documentos -->
                <div class="form-subsection">
                    <h3 class="subsection-title">8. Subida de Documentos</h3>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <p class="form-note">En caso de varias ubicaciones anexar relación por separado</p>
                            <div class="file-upload">
                                <input type="file" id="documentos" name="documentos" class="file-input" multiple>
                                <label for="documentos" class="file-upload-label">
                                    <span>Haz clic o arrastra archivos aquí para subirlos</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin de Medidas de Seguridad Contra Robo -->

            <!-- Coberturas (Secciones I y II) -->
            <div class="form-section">
                <h2 class="section-title">COBERTURAS</h2>
                <h3 class="section-subtitle">SECCIÓN I Y II - INCENDIO DEL EDIFICIO Y CONTENIDOS</h3>
                
                <!-- Edificio -->
                <div class="form-subsection">
                    <h4 class="subsection-title">Edificio</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cobertura_basica">Cobertura Básica (Incendio y/o Rayo):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="suma_edificio" name="suma_edificio" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_edificio" name="sublimite_edificio" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="remocion_edificio">Remoción de Escombros (Edificio):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="suma_remocion_edificio" name="suma_remocion_edificio" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_remocion_edificio" name="sublimite_remocion_edificio" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="edificio_otra">Edificio Otra (Especificar):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="edificio_otra_especificar" name="edificio_otra_especificar" class="form-input" placeholder="Especificar">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="suma_edificio_otra" name="suma_edificio_otra" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_edificio_otra" name="sublimite_edificio_otra" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenidos -->
                <div class="form-subsection">
                    <h4 class="subsection-title">Contenidos</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cobertura_basica_contenidos">Cobertura Básica (Incendio y/o Rayo):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="suma_contenidos" name="suma_contenidos" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_contenidos" name="sublimite_contenidos" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="remocion_contenidos">Remoción de Escombros (Contenidos):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="suma_remocion_contenidos" name="suma_remocion_contenidos" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_remocion_contenidos" name="sublimite_remocion_contenidos" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="contenidos_otra">Contenidos Otra (Especificar):</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="contenidos_otra_especificar" name="contenidos_otra_especificar" class="form-input" placeholder="Especificar">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="suma_contenidos_otra" name="suma_contenidos_otra" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="sublimite_contenidos_otra" name="sublimite_contenidos_otra" class="form-input" placeholder="Sublímite">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coberturas Adicionales -->
                <div class="form-subsection">
                    <h4 class="subsection-title">Coberturas Adicionales (Secciones I y II)</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="cobertura_explosion" value="Sí">
                                Explosión
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="cobertura_huelgas" value="Sí">
                                Huelgas y Vandalismo
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="cobertura_terremoto" value="Sí">
                                Terremoto y E.V.
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="otra_cobertura" class="sr-only">Otra Cobertura</label>
                            <input type="text" id="otra_cobertura" name="otra_cobertura" class="form-input" placeholder="Otra Cobertura (Especificar)">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="ajuste_inflacionario" value="Sí">
                                Ajuste Inflacionario
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin de Coberturas (Secciones I y II) -->

            <!-- Bienes por Convenio Expreso -->
            <div class="form-section">
                <h2 class="section-title">BIENES POR CONVENIO EXPRESO</h2>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="descripcion_bienes">Descripción de Bienes por Convenio:</label>
                        <textarea id="descripcion_bienes" name="descripcion_bienes" class="form-input" rows="3" placeholder="Describa los bienes cubiertos por convenio expreso"></textarea>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Cláusulas Adicionales</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="valor_reposicion" value="Sí">
                                Valor de Reposición
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="precio_neto_venta" value="Sí">
                                Precio Neto de Venta
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="venta_salvamentos" value="Sí">
                                Venta de Salvamentos
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="errores_avaluos" value="Sí">
                                Errores en Avalúos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="gravamenes" value="Sí">
                                Gravamenes
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="libros_registros" value="Sí">
                                Libros y Registros
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="autorizacion_reponer" value="Sí">
                                Autorización para Reponer, Reconstruir o Reparar
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="honorarios_profesionistas" value="Sí">
                                Honorarios a Profesionistas
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="renuncia_inventarios" value="Sí">
                                Renuncia de Inventarios al 10%
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="cincuenta_metros" value="Sí">
                                Cincuenta Metros
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="no_subrogacion" value="Sí">
                                No Subrogación
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="planos_moldes" value="Sí">
                                Planos, Moldes y Modelos
                            </label>
                        </div>
                        <div class="form-group" style="flex: 2;">
                            <input type="text" id="otra_clausula" name="otra_clausula" class="form-input" placeholder="Otra (Describir)">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin de Bienes por Convenio Expreso -->

            <!-- Pérdida Consecuencial (Sección III) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN III - PÉRDIDA CONSECUENCIAL</h2>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Pérdida Consecuencial</h4>
                    
                    <!-- Gastos Extraordinarios -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="gastos_extraordinarios" value="Sí">
                                Gastos Extraordinarios
                            </label>
                            <div class="form-row" style="margin-top: 0.5rem;">
                                <div class="form-group">
                                    <input type="text" id="suma_gastos_extra" name="suma_gastos_extra" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="number" id="meses_gastos_extra" name="meses_gastos_extra" class="form-input" placeholder="Meses" min="1" max="12">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pérdida de Utilidades -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_utilidades" value="Sí">
                                Pérdida de Utilidades
                            </label>
                            <div class="form-row" style="margin-top: 0.5rem;">
                                <div class="form-group">
                                    <input type="text" id="suma_perdida_util" name="suma_perdida_util" class="form-input" placeholder="Suma Asegurada">
                                </div>
                                <div class="form-group">
                                    <input type="number" id="meses_perdida_util" name="meses_perdida_util" class="form-input" placeholder="Meses" min="1" max="12">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Otras pérdidas consecuenciales -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_salarios" value="Sí">
                                Pérdida de Salarios
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_gastos_fijos" value="Sí">
                                Pérdida de Gastos Fijos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_salarios_gastos" value="Sí">
                                Pérdida de Salarios y Gastos Fijos
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_uts_salarios" value="Sí">
                                Pérdida de UTS, Salarios y Gastos Fijos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="perdida_rentas" value="Sí">
                                Pérdida de Rentas
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="seguro_contingente" value="Sí">
                                Seguro Contingente
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="interdependencia" value="Sí">
                                Interdependencia
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Pérdida Consecuencial General</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="suma_perdida_general" name="suma_perdida_general" class="form-input" placeholder="Suma Asegurada">
                        </div>
                        <div class="form-group">
                            <input type="number" id="porcentaje_perdida" name="porcentaje_perdida" class="form-input" placeholder="% Porc." min="0" max="100">
                        </div>
                    </div>
                    <p class="form-note">Las sumas aseguradas deben corresponder a los importes anuales (0 al 100%) y los meses y porcentajes corresponden al período deseado de cobertura.</p>
                </div>
            </div>
            <!-- Fin de Pérdida Consecuencial (Sección III) -->

            <!-- Responsabilidad Civil (Sección IV) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN IV - RESPONSABILIDAD CIVIL</h2>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Cobertura Básica RC Actividades e Inmuebles</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="suma_rc_actividades" name="suma_rc_actividades" class="form-input" placeholder="Suma Asegurada">
                        </div>
                        <div class="form-group">
                            <input type="text" id="sublimite_rc_actividades" name="sublimite_rc_actividades" class="form-input" placeholder="Sublímite">
                        </div>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Coberturas Adicionales</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_arrendatario" value="Sí">
                                Arrendatario
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_carga_descarga" value="Sí">
                                Carga y Descarga
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_asumida" value="Sí">
                                Asumida (Caso por Caso)
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_contratistas" value="Sí">
                                Contratistas Independientes (Caso por Caso)
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_contaminacion" value="Sí">
                                Contaminación Súbita e Imprevista
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_productos_mexico" value="Sí">
                                Productos en México
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="rc_trabajos_terminados" value="Sí">
                                Trabajos Terminados en México
                            </label>
                        </div>
                        <div class="form-group" style="flex: 2;">
                            <input type="text" id="otra_rc" name="otra_rc" class="form-input" placeholder="Otra (Especificar)">
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="luc_dos_ubicaciones_rc" value="Sí">
                            L.U.C. para dos o más ubicaciones
                        </label>
                    </div>
                </div>
            </div>
            <!-- Fin de Responsabilidad Civil (Sección IV) -->

            <!-- Estacionamiento y Rotura de Cristales -->
            <div class="form-section">
                <h2 class="section-title">ESTACIONAMIENTO Y ROTURA DE CRISTALES</h2>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Estacionamiento</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="estacionamiento_cacom" value="Sí">
                                C/ACOM. (Con Acceso Controlado)
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="estacionamiento_sacom" value="Sí">
                                S/ACOM. (Sin Acceso Controlado)
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="estacionamiento_taller" value="Sí">
                                Taller
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="no_cajones">No. Cajones (Estacionamiento / Taller):</label>
                            <input type="number" id="no_cajones" name="no_cajones" class="form-input" min="0">
                        </div>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Guardarropa, Lavado y Planchado, Equipaje y Efectos de Huéspedes</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="sub_habitacion_prenda" name="sub_habitacion_prenda" class="form-input" placeholder="Sub. Habit./Prenda">
                        </div>
                        <div class="form-group">
                            <input type="text" id="sub_agreg_anual" name="sub_agreg_anual" class="form-input" placeholder="Sub. Agreg. Anual">
                        </div>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Rotura de Cristales</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="suma_asegurada_cristales" name="suma_asegurada_cristales" class="form-input" placeholder="Suma Asegurada">
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="luc_dos_ubicaciones_cristales" value="Sí">
                            L.U.C. para dos o más ubicaciones
                        </label>
                    </div>
                </div>

                <div class="form-subsection">
                    <h4 class="subsection-title">Coberturas Adicionales</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="actos_vandalicos" value="Sí">
                                Actos Vandalicos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="remocion" value="Sí">
                                Remoción
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="decorado" value="Sí">
                                Decorado
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="reparaciones" value="Sí">
                                Reparaciones
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="alteraciones" value="Sí">
                                Alteraciones
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="mejoras" value="Sí">
                                Mejoras
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="pintura" value="Sí">
                                Pintura
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="espejos" value="Sí">
                                Espejos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="cubiertas" value="Sí">
                                Cubiertas
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="lunas" value="Sí">
                                Lunas
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="domos" value="Sí">
                                Domos
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="tragaluces" value="Sí">
                                Tragaluces
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin de Estacionamiento y Rotura de Cristales -->

            <!-- Anuncios Luminosos (Sección VI) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN VI - ANUNCIOS LUMINOSOS</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="luc_dos_ubicaciones_anuncios" value="Sí">
                            L.U.C. para dos o más ubicaciones
                        </label>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="info_anuncios">Información Adicional:</label>
                        <textarea id="info_anuncios" name="info_anuncios" class="form-input" rows="3" placeholder="Ingrese información adicional relacionada con los anuncios luminosos"></textarea>
                    </div>
                </div>
            </div>
            <!-- Fin de Anuncios Luminosos (Sección VI) -->

            <!-- Robo con Violencia y/o Asalto (Sección VII) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN VII - ROBO CON VIOLENCIA Y/O ASALTO</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="suma_asegurada_robo">Suma Asegurada:</label>
                        <input type="text" id="suma_asegurada_robo" name="suma_asegurada_robo" class="form-input" placeholder="Ingrese el monto asegurado">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="luc_dos_ubicaciones_robo" value="Sí">
                            L.U.C. para dos o más ubicaciones
                        </label>
                    </div>
                </div>
                
                <p class="form-note">En caso de varias ubicaciones, se debe anexar la relación por separado.</p>
            </div>
            <!-- Fin de Robo con Violencia y/o Asalto (Sección VII) -->

            <!-- Dinero y Valores (Sección VIII) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN VIII - DINERO Y VALORES</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="suma_asegurada_dinero">Suma Asegurada:</label>
                        <input type="text" id="suma_asegurada_dinero" name="suma_asegurada_dinero" class="form-input" placeholder="Ingrese el monto asegurado">
                    </div>
                </div>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Sublímites</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="dentro_sublimite" name="dentro_sublimite" class="form-input" placeholder="Dentro Sublímite">
                        </div>
                        <div class="form-group">
                            <input type="text" id="fuera_sublimite" name="fuera_sublimite" class="form-input" placeholder="Fuera Sublímite">
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="especificar_dinero">Especificar:</label>
                        <input type="text" id="especificar_dinero" name="especificar_dinero" class="form-input" placeholder="Especifique detalles adicionales">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="luc_dos_ubicaciones_dinero" value="Sí">
                            L.U.C. para dos o más ubicaciones
                        </label>
                    </div>
                </div>
                
                <p class="form-note">En caso de varias ubicaciones, se debe anexar la relación por separado.</p>
            </div>
            <!-- Fin de Dinero y Valores (Sección VIII) -->

            <!-- Rotura de Maquinaria (Sección IX) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN IX - ROTURA DE MAQUINARIA</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="suma_asegurada_maquinaria">Suma Asegurada:</label>
                        <input type="text" id="suma_asegurada_maquinaria" name="suma_asegurada_maquinaria" class="form-input" placeholder="Ingrese el monto asegurado">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="coberturas_maquinaria">Coberturas Adicionales (Especificar):</label>
                        <input type="text" id="coberturas_maquinaria" name="coberturas_maquinaria" class="form-input" placeholder="Especifique coberturas adicionales">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="antiguedad_maquinaria">Antigüedad de la Maquinaria:</label>
                        <input type="text" id="antiguedad_maquinaria" name="antiguedad_maquinaria" class="form-input" placeholder="Ingrese la antigüedad">
                    </div>
                </div>
                
                <p class="form-note">En caso de varias ubicaciones, se debe anexar la relación por separado. Incluya una relación detallada de los equipos con valor, marca, tipo, año de fabricación y número de serie.</p>
            </div>
            <!-- Fin de Rotura de Maquinaria (Sección IX) -->

            <!-- Calderas y Equipos Sujetos a Presión (Sección X) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN X - CALDERAS Y EQUIPOS SUJETOS A PRESIÓN</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="suma_asegurada_calderas">Suma Asegurada:</label>
                        <input type="text" id="suma_asegurada_calderas" name="suma_asegurada_calderas" class="form-input" placeholder="Ingrese el monto asegurado">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="coberturas_calderas">Coberturas Adicionales (Especificar):</label>
                        <input type="text" id="coberturas_calderas" name="coberturas_calderas" class="form-input" placeholder="Especifique coberturas adicionales">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="antiguedad_equipos">Antigüedad de los Equipos:</label>
                        <input type="text" id="antiguedad_equipos" name="antiguedad_equipos" class="form-input" placeholder="Ingrese la antigüedad">
                    </div>
                </div>
                
                <p class="form-note">En caso de varias ubicaciones, se debe anexar la relación por separado. Incluya una relación detallada de los equipos con valor, marca, tipo, año de fabricación y número de serie.</p>
            </div>
            <!-- Fin de Calderas y Equipos Sujetos a Presión (Sección X) -->

            <!-- Equipo Electrónico (Sección XI) -->
            <div class="form-section">
                <h2 class="section-title">SECCIÓN XI - EQUIPO ELECTRÓNICO</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="suma_asegurada_equipo">Suma Asegurada:</label>
                        <input type="text" id="suma_asegurada_equipo" name="suma_asegurada_equipo" class="form-input" placeholder="Ingrese el monto asegurado">
                    </div>
                </div>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Sublímites</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="equipo_fijo" name="equipo_fijo" class="form-input" placeholder="Equipo Fijo Sublímite">
                        </div>
                        <div class="form-group">
                            <input type="text" id="equipo_movil" name="equipo_movil" class="form-input" placeholder="Equipo Móvil Sublímite">
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="coberturas_equipo">Coberturas Adicionales (Especificar):</label>
                        <input type="text" id="coberturas_equipo" name="coberturas_equipo" class="form-input" placeholder="Especifique coberturas adicionales">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="antiguedad_equipo">Antigüedad de los Equipos:</label>
                        <input type="text" id="antiguedad_equipo" name="antiguedad_equipo" class="form-input" placeholder="Ingrese la antigüedad">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="descripcion_equipo">Breve Descripción del(os) Equipo(s):</label>
                        <textarea id="descripcion_equipo" name="descripcion_equipo" class="form-input" rows="2" placeholder="Describa los equipos"></textarea>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="equipo_administrativo" value="Sí">
                            El Equipo es para Uso Administrativo?
                        </label>
                    </div>
                </div>
                
                <p class="form-note">En caso de varias ubicaciones, se debe anexar la relación por separado. Incluya una relación detallada de los equipos con valor, marca, tipo, año de fabricación y número de serie.</p>
            </div>
            <!-- Fin de Equipo Electrónico (Sección XI) -->

            <!-- Siniestralidad -->
            <div class="form-section">
                <h2 class="section-title">SINIESTRALIDAD</h2>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Indicación de Siniestralidad de los últimos 3 años</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="siniestro_fecha_1">Fecha:</label>
                            <input type="date" id="siniestro_fecha_1" name="siniestro_fecha_1" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_causa_1">Causa y/o Cobertura Afectada:</label>
                            <input type="text" id="siniestro_causa_1" name="siniestro_causa_1" class="form-input" placeholder="Especifique causa/cobertura">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_monto_1">Monto:</label>
                            <input type="text" id="siniestro_monto_1" name="siniestro_monto_1" class="form-input" placeholder="Monto">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="siniestro_fecha_2">Fecha:</label>
                            <input type="date" id="siniestro_fecha_2" name="siniestro_fecha_2" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_causa_2">Causa y/o Cobertura Afectada:</label>
                            <input type="text" id="siniestro_causa_2" name="siniestro_causa_2" class="form-input" placeholder="Especifique causa/cobertura">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_monto_2">Monto:</label>
                            <input type="text" id="siniestro_monto_2" name="siniestro_monto_2" class="form-input" placeholder="Monto">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="siniestro_fecha_3">Fecha:</label>
                            <input type="date" id="siniestro_fecha_3" name="siniestro_fecha_3" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_causa_3">Causa y/o Cobertura Afectada:</label>
                            <input type="text" id="siniestro_causa_3" name="siniestro_causa_3" class="form-input" placeholder="Especifique causa/cobertura">
                        </div>
                        <div class="form-group">
                            <label for="siniestro_monto_3">Monto:</label>
                            <input type="text" id="siniestro_monto_3" name="siniestro_monto_3" class="form-input" placeholder="Monto">
                        </div>
                    </div>
                </div>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Notas Legales</h4>
                    <p class="form-note">Este documento constituye una solicitud de seguro y no representa garantía alguna de aceptación. La aceptación de la solicitud no implica automáticamente la emisión de una póliza de seguro ni un recibo válido.</p>
                </div>
                
                <div class="form-subsection">
                    <h4 class="subsection-title">Firmas</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre_asegurado">Nombre del Asegurado:</label>
                            <input type="text" id="nombre_asegurado" name="nombre_asegurado" class="form-input" placeholder="Nombre completo">
                        </div>
                        <div class="form-group">
                            <label for="fecha_firma">Fecha:</label>
                            <input type="date" id="fecha_firma" name="fecha_firma" class="form-input">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lugar_firma">Lugar:</label>
                            <input type="text" id="lugar_firma" name="lugar_firma" class="form-input" placeholder="Ciudad, Estado">
                        </div>
                        <div class="form-group">
                            <label for="firma_asegurado">Firma del Asegurado:</label>
                            <input type="text" id="firma_asegurado" name="firma_asegurado" class="form-input" placeholder="Firme aquí">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre_agente">Nombre del Agente:</label>
                            <input type="text" id="nombre_agente" name="nombre_agente" class="form-input" placeholder="Nombre completo">
                        </div>
                        <div class="form-group">
                            <label for="firma_agente">Firma del Agente:</label>
                            <input type="text" id="firma_agente" name="firma_agente" class="form-input" placeholder="Firme aquí">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin de Siniestralidad -->
        </div>
    </main>
    
    <footer>
        <p>&copy; {currentYear} ONE COACH DAÑOS. Todos los derechos reservados.</p>
    </footer>
    

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			// --- Variables Globales ---
			let currentStep = 1;
			const totalSteps = 6;
			const form = document.getElementById('wizard-form');
			const steps = Array.from(document.querySelectorAll('.form-step'));
			const navSteps = Array.from(document.querySelectorAll('.nav-step'));
			const progressFill = document.getElementById('progress-fill');
			const progressPercent = document.getElementById('progress-percent');
			const currentSectionName = document.getElementById('current-section-name');
			const themeToggleButton = document.querySelector('.theme-toggle');
			const themeIcon = document.getElementById('theme-icon');
	
			// --- Navegación del Wizard ---
			window.nextStep = function() {
				if (validateStep(currentStep)) {
					if (currentStep < totalSteps) {
						currentStep++;
						goToStep(currentStep);
					}
				}
			}
	
			window.prevStep = function() {
				if (currentStep > 1) {
					currentStep--;
					goToStep(currentStep);
				}
			}
	
			window.goToStep = function(stepNumber) {
				currentStep = stepNumber;
				// Oculta todos los pasos y quita la clase 'active'
				steps.forEach(step => step.classList.remove('active'));
				navSteps.forEach(nav => nav.classList.remove('active'));
	
				// Muestra el paso actual
				document.getElementById(`step-${currentStep}`).classList.add('active');
				const currentNav = document.querySelector(`.nav-step[data-step="${currentStep}"]`);
				currentNav.classList.add('active');
	
				// Marca los pasos anteriores como completados
				navSteps.forEach((nav, index) => {
					if (index < currentStep - 1) {
						nav.classList.add('completed');
					} else {
						nav.classList.remove('completed');
					}
				});
	
				updateProgress();
			}
			
			// --- Validación ---
			// --- Reemplaza la función validateStep anterior con esta ---

function validateStep(stepNumber) {
    const currentStepElement = steps[stepNumber - 1];
    const fieldsToValidate = currentStepElement.querySelectorAll('input[required], select[required], textarea[required]');
    let isStepValid = true;

    // Primero, limpia todos los indicadores de error del paso actual
    currentStepElement.querySelectorAll('.field-group').forEach(group => {
        group.classList.remove('has-error');
    });

    // Ahora, valida cada campo
    for (const field of fieldsToValidate) {
        // Verifica si el campo (que está visible) es inválido
        if (!field.checkValidity()) {
            isStepValid = false;
            // Busca el contenedor padre '.field-group' para aplicarle el estilo
            const fieldGroup = field.closest('.field-group, .option-group');
            if (fieldGroup) {
                fieldGroup.classList.add('has-error')
            }
        }
    }
    
    // Si la validación falla, no se avanzará de paso.
    return isStepValid;
}
	
			// --- Actualización de Progreso ---
			function updateProgress() {
				const percent = ((currentStep - 1) / (totalSteps - 1)) * 100;
				progressFill.style.width = `${percent}%`;
				progressPercent.textContent = Math.round(percent);
				currentSectionName.textContent = document.querySelector(`.nav-step[data-step="${currentStep}"] .step-title`).textContent;
			}
	
			// --- Toggle para el Tema Oscuro ---
			window.toggleTheme = function() {
				document.body.classList.toggle('dark-theme');
				if (document.body.classList.contains('dark-theme')) {
					themeIcon.textContent = '☀️'; // Sol
					localStorage.setItem('theme', 'dark');
				} else {
					themeIcon.textContent = '🌙'; // Luna
					localStorage.setItem('theme', 'light');
				}
			}
	
			// Cargar tema guardado
			if (localStorage.getItem('theme') === 'dark') {
				document.body.classList.add('dark-theme');
				themeIcon.textContent = '☀️';
			}
	
			// Manejo de campos condicionales en el paso 3 - Características del Edificio
			document.addEventListener('DOMContentLoaded', function() {
				// Mostrar/ocultar campo de tipo de techo "Otro"
				const tipoTecho = document.getElementById('tipo-techo') as HTMLSelectElement | null;
				const otroTechoGroup = document.getElementById('otro-techo-group') as HTMLElement | null;
				const otroTechoInput = document.getElementById('otro-techo') as HTMLInputElement | null;
				
				if (tipoTecho && otroTechoGroup && otroTechoInput) {
					tipoTecho.addEventListener('change', function(this: HTMLSelectElement) {
						if (otroTechoGroup) {
							otroTechoGroup.style.display = this.value === 'Otro' ? 'block' : 'none';
							if (this.value !== 'Otro' && otroTechoInput) {
								otroTechoInput.value = '';
							}
						}
					});

					// Inicializar visibilidad al cargar la página
					if (tipoTecho.value === 'Otro') {
						otroTechoGroup.style.display = 'block';
					}
				}
				
				// Mostrar/ocultar campo de tipo de exclusas
				const exclusasCheckbox = document.getElementById('exclusas') as HTMLInputElement | null;
				const tipoExclusasGroup = document.getElementById('tipo-exclusas-group') as HTMLElement | null;
				const tipoExclusasInput = document.getElementById('tipo-exclusas') as HTMLInputElement | null;
				
				if (exclusasCheckbox && tipoExclusasGroup) {
					exclusasCheckbox.addEventListener('change', function(this: HTMLInputElement) {
						tipoExclusasGroup.style.display = this.checked ? 'block' : 'none';
						if (!this.checked && tipoExclusasInput) {
							tipoExclusasInput.value = '';
						}
					});

					// Inicializar visibilidad al cargar la página
					if (exclusasCheckbox.checked) {
						tipoExclusasGroup.style.display = 'block';
					}
				}
				
				// Mostrar/ocultar campo de tipo de vigilancia
				const vigilanciaCheckbox = document.getElementById('vigilancia') as HTMLInputElement | null;
				const tipoVigilanciaGroup = document.getElementById('tipo-vigilancia-group') as HTMLElement | null;
				const tipoVigilanciaSelect = document.getElementById('tipo-vigilancia') as HTMLSelectElement | null;
				
				if (vigilanciaCheckbox && tipoVigilanciaGroup) {
					vigilanciaCheckbox.addEventListener('change', function(this: HTMLInputElement) {
						tipoVigilanciaGroup.style.display = this.checked ? 'block' : 'none';
						if (!this.checked && tipoVigilanciaSelect) {
							tipoVigilanciaSelect.value = '';
						}
					});

					// Inicializar visibilidad al cargar la página
					if (vigilanciaCheckbox.checked) {
						tipoVigilanciaGroup.style.display = 'block';
					}
				}
			});
	
			// --- Lógica Adicional ---
			window.toggleRiskAddress = function(checkbox: HTMLInputElement) {
				const riskFields = document.getElementById('risk-address-fields') as HTMLElement | null;
				if (!riskFields) return;
				
				const requiredInputs = riskFields.querySelectorAll<HTMLInputElement | HTMLSelectElement>('input, select');
				
				if (checkbox.checked) {
					riskFields.style.display = 'none';
					requiredInputs.forEach(input => input.removeAttribute('required'));
				} else {
					riskFields.style.display = 'block';
					requiredInputs.forEach(input => {
						// Solo vuelve a poner 'required' si lo tenía originalmente
						// (En este caso, todos los campos de dirección lo tienen)
						input.setAttribute('required', 'required');
					});
				}
			};
	
			// --- Inicialización ---
			updateProgress(); // Llama a la función al cargar la página por primera vez
			document.addEventListener('DOMContentLoaded', () => {
				// Initialize any additional form functionality here
				console.log('Form initialized');
			});
		});
	</script>
	
	<!-- Form handler scripts -->
	<script type="module" src="/src/scripts/form-handler.ts"></script>
	<script type="module" src="/src/scripts/form-state.ts"></script>
	
	<script>
		function prevStep() {
			if (currentStep > 1) {
				currentStep--;
				updateWizard();
				updateProgress();
				showStepTransition();
			}
		}
		
		// Función para ir directamente a un paso específico
		function showStep(step) {
			// Only allow navigation to completed steps or the next step
			if (step <= currentStep || completedSteps.has(step - 1) || step === 1) {
				currentStep = step;
				updateWizard();
				updateProgress();
				showStepTransition();
			} else {
				showNotification('Completa los pasos anteriores para continuar', 'warning');
			}
		}
		
		// Animación de transición entre pasos
		function showStepTransition() {
			const currentStepEl = document.getElementById(`step-${currentStep}`) as HTMLElement;
			if (currentStepEl) {
				currentStepEl.style.transform = 'translateX(-20px)';
				currentStepEl.style.opacity = '0';
				
				setTimeout(() => {
					currentStepEl.style.transform = 'translateX(0)';
					currentStepEl.style.opacity = '1';
				}, 100);
			}
		}
		
		// Actualizar el estado visual del wizard
		function updateWizard() {
			// Ocultar todos los pasos
			document.querySelectorAll('.form-step').forEach(step => {
				step.classList.remove('active');
			});
			
			// Mostrar el paso actual
			const currentStepEl = document.getElementById(`step-${currentStep}`) as HTMLElement;
			if (currentStepEl) {
				currentStepEl.classList.add('active');
			}
			
			// Actualizar navegación superior
			document.querySelectorAll('.nav-step').forEach((navStep, index) => {
				navStep.classList.remove('active', 'completed', 'accessible');
				
				if (index + 1 === currentStep) {
					navStep.classList.add('active');
				} else if (completedSteps.has(index + 1)) {
					navStep.classList.add('completed');
				} 
				
				// Marcar pasos accesibles
				if (index + 1 <= currentStep || completedSteps.has(index) || index === 0) {
					navStep.classList.add('accessible');
				}
			});
		}
		
		// Actualizar barra de progreso
		function updateProgress() {
			const progressPercent = Math.round((currentStep / totalSteps) * 100).toString();
			const progressFill = document.getElementById('progress-fill') as HTMLElement;
			const progressPercText = document.getElementById('progress-percent') as HTMLElement;
			const currentSectionName = document.getElementById('current-section-name') as HTMLElement;
			
			if (progressFill) progressFill.style.width = `${progressPercent}%`;
			if (progressPercText) progressPercText.textContent = progressPercent;
			
			// Actualizar nombre de la sección actual
			const sectionNames = [
				'Información Básica',
				'Ubicación de Riesgo', 
				'Características',
				'Seguridad',
				'Coberturas',
				'Finalizar'
			];
			if (currentSectionName) {
				currentSectionName.textContent = sectionNames[currentStep - 1] || 'Completando...';
			}
		}
		
		// VALIDACIÓN COMPLETAMENTE NUEVA Y SIMPLE
		function validateCurrentStep(): boolean {
			const form = document.getElementById('wizard-form') as HTMLFormElement;
			console.log(' Validando paso:', currentStep);
			
			// Validación específica para cada paso
			switch(currentStep) {
				case 1:
					return validateStep1();
				case 2:
					return validateStep2();
				case 3:
					return validateStep3();
				case 4:
					return true; // Paso 4 no tiene campos requeridos
				case 5:
					return true; // Paso 5 no tiene campos requeridos
				case 6:
					return validateStep6();
				default:
					return true;
			}
		}
		
		function validateStep1() {
			console.log(' Validando Paso 1: Información Básica');
			const requiredFields = [
				{ id: 'rfc', name: 'RFC' },
				{ id: 'razon-social', name: 'Razón Social' },
				{ id: 'cp', name: 'Código Postal' },
				{ id: 'telefono', name: 'Teléfono' },
				{ id: 'correo', name: 'Correo Electrónico' }
			];
			
			return validateFields(requiredFields);
		}
		
		function validateStep2() {
			console.log(' Validando Paso 2: Ubicación de Riesgo');
			const sameAddress = document.getElementById('same-address') as HTMLInputElement;
			
			if (sameAddress && sameAddress.checked) {
				console.log(' Misma dirección seleccionada');
				return true;
			}
			
			const requiredFields = [
				{ id: 'cp-riesgo', name: 'Código Postal de Riesgo' },
				{ id: 'calle-riesgo', name: 'Calle de Riesgo' },
				{ id: 'numero-riesgo', name: 'Número de Riesgo' }
			];
			
			return validateFields(requiredFields);
		}
		
		function validateStep3() {
			console.log(' Validando Paso 3: Características');
			const requiredFields = [
				{ id: 'anio-construccion', name: 'Año de Construcción' },
				{ id: 'uso-inmueble', name: 'Uso del Inmueble' }
			];
			
			// Validar campos básicos
			const basicValid = validateFields(requiredFields);
			
			// Validar tipo de construcción (radio buttons)
			const tipoConstructionSelected = document.querySelector('input[name="tipo_construccion"]:checked') as HTMLInputElement | null;
			if (!tipoConstructionSelected) {
				showNotification(' Por favor selecciona el tipo de construcción', 'warning');
				return false;
			}
			
			return basicValid;
		}
		
		function validateStep6() {
			console.log(' Validando Paso 6: Finalizar');
			const requiredFields = [
				{ id: 'nombre_asegurado', name: 'Nombre del Asegurado' }
			];
			
			return validateFields(requiredFields);
		}
		
		interface FieldConfig {
			id: string;
			name: string;
		}
		
		function validateFields(fields) {
			let isValid = true;
			let firstInvalidField = null;
			const currentStepEl = document.getElementById(`step-${currentStep}`);
			
			// Primero, limpia todos los errores previos
			fields.forEach(fieldConfig => {
				// Buscar el campo dentro del paso actual para evitar IDs duplicados
				const field = currentStepEl.querySelector(`#${fieldConfig.id}`) as HTMLInputElement | null
					|| document.getElementById(fieldConfig.id) as HTMLInputElement | null;
				if (field) {
					const fieldGroup = field.closest('.field-group');
					if (fieldGroup) {
						fieldGroup.classList.remove('has-error');
					}
				}
			});
			
			// Luego valida los campos
			fields.forEach(fieldConfig => {
				// Buscar el campo dentro del paso actual para evitar IDs duplicados
				const field = currentStepEl.querySelector(`#${fieldConfig.id}`) as HTMLInputElement | null
					|| document.getElementById(fieldConfig.id) as HTMLInputElement | null;
				if (!field) {
					console.log(` Campo no encontrado: ${fieldConfig.id}`);
					return;
				}
				
				const value = field.value ? field.value.trim() : '';
				console.log(` ${fieldConfig.name}: "${value}"`);
				
				if (!value) {
					console.log(` Campo vacío: ${fieldConfig.name}`);
					const fieldGroup = field.closest('.field-group') || field.parentElement;
					if (fieldGroup) {
						fieldGroup.classList.add('has-error');
					} else {
						// Si no encuentra un field-group, aplica estilos directamente
						field.style.borderColor = '#ef4444';
						field.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.2)';
					}
					
					if (!firstInvalidField) firstInvalidField = field;
					isValid = false;
					
					// Mostrar notificación del primer campo inválido
					if (firstInvalidField === field) {
						showNotification(`Por favor completa el campo: ${fieldConfig.name}`, 'error');
					}
				} else {
					console.log(` Campo válido: ${fieldConfig.name}`);
					const fieldGroup = field.closest('.field-group') || field.parentElement;
					if (fieldGroup) {
						fieldGroup.classList.remove('has-error');
					}
					field.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.2)';
				}
			});
			
			if (!isValid) {
				showNotification(' Por favor completa todos los campos requeridos', 'warning');
				if (firstInvalidField) {
					firstInvalidField.focus();
					firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
				}
			} else {
				showNotification(' Sección completada correctamente', 'success');
			}
			
			console.log(` Resultado validación: ${isValid}`);
			return isValid;
		}

		// Helper para obtener el valor visible/activo cuando hay duplicados
		function getActiveValueBy({ id, name } = {}) {
			// 1) Intentar dentro del paso activo
			const currentStepEl = document.querySelector('.form-step.active');
			if (currentStepEl) {
				if (id) {
					const el = currentStepEl.querySelector(`#${id}`) as HTMLInputElement | HTMLSelectElement | null;
					if (el && (el as any).value) return (el as any).value;
				}
				if (name) {
					const els = Array.from(currentStepEl.querySelectorAll(`[name='${name}']`)) as (HTMLInputElement | HTMLSelectElement)[];
					for (const el of els) {
						if (el && el.value) return el.value;
					}
				}
			}
			// 2) Elemento visible en el documento
			if (name) {
				const all = Array.from(document.querySelectorAll(`[name='${name}']`)) as (HTMLInputElement | HTMLSelectElement)[];
				for (const el of all) {
					if ((el as any).offsetParent !== null && el.value) return el.value;
				}
				// último no vacío
				for (const el of all.reverse()) {
					if (el.value) return el.value;
				}
			}
			if (id) {
				const el = document.getElementById(id) as HTMLInputElement | HTMLSelectElement | null;
				if (el && el.value) return el.value;
			}
			return '';
		}
		
		// Función para manejar clicks en checkboxes y opciones
		function toggleOption(element: HTMLElement, inputId: string) {
			const input = document.getElementById(inputId) as HTMLInputElement | null;
			if (input) {
				if (input.type === 'checkbox') {
					input.checked = !input.checked;
					element.classList.toggle('checked', input.checked);
					
					// Efectos visuales
					if (input.checked) {
						element.style.transform = 'scale(1.02)';
						setTimeout(() => element.style.transform = 'scale(1)', 150);
					}
				}
			}
		}
		
		// Función para manejar radio buttons
		function selectRadio(element: HTMLElement, name: string, value: string) {
			// Desmarcar todos los elementos del mismo grupo
			document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
				const parent = radio.closest('.option-item');
				if (parent) {
					parent.classList.remove('checked');
				}
				radio.checked = false;
			});
			
			// Marcar el elemento seleccionado
			const input = element.querySelector('input');
			if (input) {
				input.checked = true;
				input.value = value;
				element.classList.add('checked');
				
				// Efecto visual
				element.style.transform = 'scale(1.02)';
				setTimeout(() => element.style.transform = 'scale(1)', 150);
			}
		}
		
		// Date picker initialization
		return new Promise((resolve, reject) => {
			// Check if already loaded
			if ((window as any).emailjs) {
				resolve((window as any).emailjs);
				return;
			}

			const script = document.createElement('script');
			script.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js';
			script.async = true;
			
			script.onload = () => {
				try {
					(window as any).emailjs.init('9uhWKUO7vI9o1xXgK');
					console.log(' EmailJS inicializado correctamente');
					resolve((window as any).emailjs);
				} catch (error) {
					console.error(' Error al inicializar EmailJS:', error);
					reject(error);
				}
			};
			
			script.onerror = () => {
				reject(new Error('No se pudo cargar EmailJS SDK'));
			};
			
			document.head.appendChild(script);
		});
	}

	// Preload EmailJS SDK
	loadEmailJSSDK().catch(error => {
		console.warn(' EmailJS no se pudo cargar previamente:', error);
	});

	// Event listener para el formulario wizard
	const wizardForm = document.getElementById('wizard-form');
	if (wizardForm) {
		wizardForm.addEventListener('submit', function(event) {
			event.preventDefault(); // Evita recargar la página
			
			console.log(' Formulario wizard enviado');
			
			// Mostrar indicador de carga
			const submitBtn = document.querySelector('.btn-submit');
			if (submitBtn) {
				submitBtn.textContent = ' Enviando...';
				submitBtn.disabled = true;
			}
			
			// Enviar formulario con EmailJS
			(window as any).emailjs.sendForm('service_6gnqp8y', 'template_2yre1uf', this)
				.then(function() {
					console.log(' Solicitud enviada correctamente');
					
					// Mostrar notificación de éxito
					showNotification(' ¡Listo! Hemos recibido tu solicitud.\n Tiempo estimado de respuesta: 24–48 h hábiles.\n Gracias por confiar en nuestros servicios.', 'success');
					
					// Cambiar botón
					if (submitBtn) {
						submitBtn.textContent = ' Enviado Exitosamente';
						submitBtn.style.background = '#10b981';
					}
					
					// Mostrar modal de éxito si existe
					if (typeof showSuccessModal === 'function') {
						showSuccessModal();
					}
					
					// Resetear formulario después de 3 segundos
					setTimeout(() => {
						if (wizardForm && typeof wizardForm.reset === 'function') {
							wizardForm.reset();
						}
						if (submitBtn) {
							submitBtn.textContent = 'Enviar Solicitud';
							submitBtn.disabled = false;
							submitBtn.style.background = '';
						}
					}, 3000);
					
				}, function(error) {
					console.error(' Error al enviar:', error);
					
					// Mostrar notificación de error
					let errorMessage = 'Ocurrió un error al enviar la solicitud';
					if (error && typeof error === 'object') {
						if ('text' in error) {
							errorMessage = String(error.text);
						} else if ('message' in error) {
							errorMessage = String(error.message);
						}
					}
					
					showNotification(` Error: ${errorMessage}`, 'error');
					
					// Resetear botón
					if (submitBtn) {
						submitBtn.textContent = 'Enviar Solicitud';
						submitBtn.disabled = false;
					}
				});
		});
	}
</script>
	
<!-- Estilos adicionales para notificaciones y archivos -->
<style>
	.file-list {
		margin-top: 1rem;
	}
	
	.file-item {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0.5rem;
		background: rgba(59, 130, 246, 0.1);
		border-radius: 6px;
		margin-bottom: 0.5rem;
		font-size: 0.875rem;
	}
	
	.file-name {
		flex: 1;
		font-weight: 500;
	}
	
	.file-size {
                if (name) {
                    const els = Array.from(activeStep.querySelectorAll(`[name='${name}']`)) as (HTMLInputElement | HTMLSelectElement)[];
                    for (const el of els) {
                        if (el && el.value) return el.value;
                    }
                }
            }
            // 2) Elemento visible en el documento
            if (name) {
                const all = Array.from(document.querySelectorAll(`[name='${name}']`)) as (HTMLInputElement | HTMLSelectElement)[];
                for (const el of all) {
                    if ((el as any).offsetParent !== null && el.value) return el.value;
                }
                // último no vacío
                for (const el of all.reverse()) {
                    if (el.value) return el.value;
                }
            }
            if (id) {
                const el = document.getElementById(id) as HTMLInputElement | HTMLSelectElement | null;
                if (el && el.value) return el.value;
            }
            return '';
        }
        
        // Función para manejar clicks en checkboxes y opciones
        function toggleOption(element: HTMLElement, inputId: string) {
            const input = document.getElementById(inputId) as HTMLInputElement | null;
            if (input) {
                if (input.type === 'checkbox') {
                    input.checked = !input.checked;
                    element.classList.toggle('checked', input.checked);
                    
                    // Efectos visuales
                    if (input.checked) {
                        element.style.transform = 'scale(1.02)';
                        setTimeout(() => element.style.transform = 'scale(1)', 150);
                    }
                }
        }
        
        // Función para manejar radio buttons
        function selectRadio(element: HTMLElement, name: string, value: string) {
            // Desmarcar todos los elementos del mismo grupo
            document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                const parent = radio.closest('.option-item');
                if (parent) {
                    parent.classList.remove('checked');
                }
                radio.checked = false;
            });
            
            // Marcar el elemento seleccionado
            const input = element.querySelector('input');
            if (input) {
                input.checked = true;
                input.value = value;
                element.classList.add('checked');
                
                // Efecto visual
                element.style.transform = 'scale(1.02)';
                setTimeout(() => element.style.transform = 'scale(1)', 150);
            }
        }
        
        // Date picker initialization
            return new Promise((resolve, reject) => {
                // Check if already loaded
                if ((window as any).emailjs) {
                    resolve((window as any).emailjs);
                    return;
                }

                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js';
                script.async = true;
                
                script.onload = () => {
                    try {
                        (window as any).emailjs.init('9uhWKUO7vI9o1xXgK');
                        console.log('✅ EmailJS inicializado correctamente');
                        resolve((window as any).emailjs);
                    } catch (error) {
                        console.error('❌ Error al inicializar EmailJS:', error);
                        reject(error);
                    }
                };
                
                script.onerror = () => {
                    reject(new Error('No se pudo cargar EmailJS SDK'));
                };
                
                document.head.appendChild(script);
            });
        }

        // Preload EmailJS SDK
        loadEmailJSSDK().catch(error => {
            console.warn('⚠️ EmailJS no se pudo cargar previamente:', error);
        });

        // Event listener para el formulario wizard
        const wizardForm = document.getElementById('wizard-form');
        if (wizardForm) {
            wizardForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Evita recargar la página
                
                console.log('🚀 Formulario wizard enviado');
                
                // Mostrar indicador de carga
                const submitBtn = document.querySelector('.btn-submit');
                if (submitBtn) {
                    submitBtn.textContent = '📤 Enviando...';
                    submitBtn.disabled = true;
                }
                
                // Enviar formulario con EmailJS
                (window as any).emailjs.sendForm('service_6gnqp8y', 'template_2yre1uf', this)
                    .then(function() {
                        console.log('✅ Solicitud enviada correctamente');
                        
                        // Mostrar notificación de éxito
                        showNotification('🎉 ¡Listo! Hemos recibido tu solicitud.\n⏰ Tiempo estimado de respuesta: 24–48 h hábiles.\n🙏 Gracias por confiar en nuestros servicios.', 'success');
                        
                        // Cambiar botón
                        if (submitBtn) {
                            submitBtn.textContent = '✅ Enviado Exitosamente';
                            submitBtn.style.background = '#10b981';
                        }
                        
                        // Mostrar modal de éxito si existe
                        if (typeof showSuccessModal === 'function') {
                            showSuccessModal();
                        }
                        
                        // Resetear formulario después de 3 segundos
                        setTimeout(() => {
                            if (wizardForm && typeof wizardForm.reset === 'function') {
                                wizardForm.reset();
                            }
                            if (submitBtn) {
                                submitBtn.textContent = 'Enviar Solicitud';
                                submitBtn.disabled = false;
                                submitBtn.style.background = '';
                            }
                        }, 3000);
                        
                    }, function(error) {
                        console.error('❌ Error al enviar:', error);
                        
                        // Mostrar notificación de error
                        let errorMessage = 'Ocurrió un error al enviar la solicitud';
                        if (error && typeof error === 'object') {
                            if ('text' in error) {
                                errorMessage = String(error.text);
                            } else if ('message' in error) {
                                errorMessage = String(error.message);
                            }
                        }
                        
                        showNotification(`❌ Error: ${errorMessage}`, 'error');
                        
                        // Resetear botón
                        if (submitBtn) {
                            submitBtn.textContent = 'Enviar Solicitud';
                            submitBtn.disabled = false;
                        }
                    });
            });
        }
    </script>
    
    <!-- Estilos adicionales para notificaciones y archivos -->
    <style>
        .file-list {
            margin-top: 1rem;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 6px;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .file-name {
            flex: 1;
            font-weight: 500;
        }
        
        .file-size {
            color: var(--text-light);
            margin: 0 1rem;
        }
        
        .file-remove {
            background: var(--error);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .file-remove:hover {
            background: #dc2626;
        }
        
        /* Animaciones adicionales */
        .form-step {
            transition: all 0.3s ease;
        }
        
        .nav-step {
            cursor: pointer;
        }
        
        .nav-step:hover:not(.active) {
            background: rgba(59, 130, 246, 0.1);
        }
        
        /* Mejoras visuales para campos inválidos */
        input:invalid {
            border-color: var(--error);
        }
        
        input:valid {
            border-color: var(--success);
        }
        
        /* Responsive improvements */
        @media (max-width: 640px) {
            /* Notifications */
            .notification {
                right: 10px;
                left: 10px;
                min-width: auto;
            }
            
            /* Header/Hero */
            .hero-header { padding: 2rem 1rem 1.5rem; }
            .hero-title { font-size: 1.75rem; }
            .hero-subtitle { font-size: 1rem; }
            .progress-container { padding: 0 0.5rem; }
            .progress-text { font-size: 0.75rem; }
            .theme-toggle { top: 10px; right: 10px; width: 40px; height: 40px; }

            /* Main container and cards */
            .main-container { padding: 1rem; margin: 0 auto; }
            .form-wizard { border-radius: var(--radius); }

            /* Wizard nav */
            .wizard-nav { gap: 0.5rem; }
            .nav-step { min-width: 90px; padding: 0.75rem 0.5rem; }
            .step-number { width: 32px; height: 32px; font-size: 0.9rem; }
            .step-title { font-size: 0.8rem; }

            /* Form sections */
            .form-step { padding: 1.25rem 1rem; }
            .step-title-main { font-size: 1.25rem; }
            .step-description { font-size: 0.95rem; }

            /* Grid and fields */
            .smart-grid { display: grid; gap: 0.75rem; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .field-label { font-size: 0.8rem; }
            .smart-input { padding: 0.875rem; font-size: 1rem; }

            /* Options and uploads */
            .option-item { padding: 0.75rem; }
            .file-upload { padding: 1rem; }
            .upload-icon { font-size: 2.25rem; }

            /* Buttons and nav */
            .btn { padding: 0.875rem 1rem; font-size: 1rem; }
            .step-navigation { gap: 0.5rem; }
            .step-navigation .btn { width: 100%; justify-content: center; }

            /* Footer */
            footer { padding: 1rem; text-align: center; }
        }
    </style>
</body>
</html>
